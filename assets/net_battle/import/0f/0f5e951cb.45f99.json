[1,["ae3obI6i1PGZV0D55VIDgN","3boEJBHzNLcoIJFDgX8mQX"],["node","root","data","_spriteFrame","_effect"],[["cc.EffectAsset",["_name","shaders","techniques"],0],["cc.Prefab",["_name"],2],["cc.Node",["_name","_opacity","_components","_prefab","_color","_contentSize","_trs"],1,9,4,5,5,7],["cc.Sprite",["_sizeMode","node","_spriteFrame"],2,1,6],["bcb6fJtO0dLZ6OrhclujDMp",["_tileW","_tileH","_radius","_feather","node","_effect"],-1,1,6],["cc.PrefabInfo",["root"],3,1]],[[0,0,1,2,4],[1,0,2],[2,0,1,2,3,4,5,6,3],[3,0,1,2,2],[4,0,1,2,3,4,5,5],[5,0,1]],[[[[0,"magma",[{"hash":2069820059,"record":null,"name":"magma|vs|fs","glsl3":{"vert":"\nprecision highp float;\nuniform CCGlobal {\n  mat4 cc_matView;\n  mat4 cc_matViewInv;\n  mat4 cc_matProj;\n  mat4 cc_matProjInv;\n  mat4 cc_matViewProj;\n  mat4 cc_matViewProjInv;\n  vec4 cc_cameraPos;\n  vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n};\nin vec3 a_position;\nin vec2 a_uv0;\nin vec4 a_color;\nout vec2 v_uv0;\nout vec4 v_color;\nvoid main () {\n  gl_Position = cc_matViewProj * vec4(a_position, 1);\n  v_uv0 = a_uv0;\n  v_color = a_color;\n}","frag":"\n  precision highp float;\nuniform CCGlobal {\n  mat4 cc_matView;\n  mat4 cc_matViewInv;\n  mat4 cc_matProj;\n  mat4 cc_matProjInv;\n  mat4 cc_matViewProj;\n  mat4 cc_matViewProjInv;\n  vec4 cc_cameraPos;\n  vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n};\n#if USE_ALPHA_TEST\n  uniform ALPHA_TEST {\n    float alphaThreshold;\n  };\n#endif\n;\n#endif\n  in vec2 v_uv0;\n  in vec4 v_color;\n  uniform Properties {\n    vec4 featherColor;\n    float radius;\n    float feather;\n    float speed;\n    float tileW;\n    float tileH;\n  };\n#if USE_TEXTURE\n  uniform sampler2D texture;\n#endif\n  vec2 random2( vec2 p ) {\n    return fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n  }\nfloat noise(vec2 st) {\n    vec2 i = floor(st);\n    vec2 f = fract(st);\n    vec2 u = f*f*(3.0-2.0*f);\n    return mix( mix( dot( random2(i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ),\n                     dot( random2(i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\n                mix( dot( random2(i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ),\n                     dot( random2(i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\n}\nvec3 magmaFunc(vec3 color, vec2 uv, float power, float colorMul, float glowRate, bool animate, float noiseAmount)\n{\n    vec3 rockColor = vec3(0.0,0.0,0.0);\n    float minDistance = 1.;\n    uv.x *= tileW;\n    uv.y *= tileH;\n    vec2 cell = floor(uv);\n    vec2 frac = fract(uv);\n    for (int i = -1; i <= 1; i++) {\n        for (int j = -1; j <= 1; j++) {\n          vec2 cellDir = vec2(float(i), float(j));\n            vec2 randPoint = random2(cell + cellDir);\n            randPoint += noise(uv) * noiseAmount;\n            randPoint = animate ? 0.5 + 0.5 * sin(cc_time.x * 5.35 * speed + 6.2831 * randPoint) : randPoint;\n            minDistance = min(minDistance, length(cellDir + randPoint - frac));\n        }\n    }\n    float powAdd = sin(uv.x * 2. + cc_time.x * glowRate) + sin(uv.y * 2. + cc_time.x * glowRate);\n    vec3 outColor = vec3(color * pow(minDistance, power + powAdd * .95) * colorMul);\n    outColor.rgb = mix(rockColor, outColor.rgb, minDistance);\n    return outColor;\n}\n  void main () {\n    vec4 color = v_color;\n    vec2 uv = vec2(v_uv0.x,  v_uv0.y);\n    vec3 c = magmaFunc(vec3(1., 1.0, 1.0), uv,   10.5, 0.15, 1.5, true, 0.0);\n    float l = smoothstep(0.0,0.2, c.r);\n    color.rgb += vec3(l,l,l);\n    color.a += l;\n    float dis = distance(vec2(v_uv0.x, v_uv0.y), vec2(0.5, 0.5));\n    color.a = smoothstep(radius - feather, radius, dis) * color.a;\n    color.rgb = mix(color.rgb, featherColor.rgb,smoothstep(0., feather, radius -dis));\n    gl_FragColor = color;\n  }"},"glsl1":{"vert":"\nprecision highp float;\nuniform mat4 cc_matViewProj;\nattribute vec3 a_position;\nattribute vec2 a_uv0;\nattribute vec4 a_color;\nvarying vec2 v_uv0;\nvarying vec4 v_color;\nvoid main () {\n  gl_Position = cc_matViewProj * vec4(a_position, 1);\n  v_uv0 = a_uv0;\n  v_color = a_color;\n}","frag":"\n  precision highp float;\nuniform vec4 cc_time;\n#if USE_ALPHA_TEST\n#endif\n;\n#endif\n  varying vec2 v_uv0;\n  varying vec4 v_color;\n  uniform vec4 featherColor;\nuniform float radius;\nuniform float feather;\nuniform float speed;\nuniform float tileW;\nuniform float tileH;\n#if USE_TEXTURE\n  uniform sampler2D texture;\n#endif\n  vec2 random2( vec2 p ) {\n    return fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n  }\nfloat noise(vec2 st) {\n    vec2 i = floor(st);\n    vec2 f = fract(st);\n    vec2 u = f*f*(3.0-2.0*f);\n    return mix( mix( dot( random2(i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ),\n                     dot( random2(i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\n                mix( dot( random2(i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ),\n                     dot( random2(i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\n}\nvec3 magmaFunc(vec3 color, vec2 uv, float power, float colorMul, float glowRate, bool animate, float noiseAmount)\n{\n    vec3 rockColor = vec3(0.0,0.0,0.0);\n    float minDistance = 1.;\n    uv.x *= tileW;\n    uv.y *= tileH;\n    vec2 cell = floor(uv);\n    vec2 frac = fract(uv);\n    for (int i = -1; i <= 1; i++) {\n        for (int j = -1; j <= 1; j++) {\n          vec2 cellDir = vec2(float(i), float(j));\n            vec2 randPoint = random2(cell + cellDir);\n            randPoint += noise(uv) * noiseAmount;\n            randPoint = animate ? 0.5 + 0.5 * sin(cc_time.x * 5.35 * speed + 6.2831 * randPoint) : randPoint;\n            minDistance = min(minDistance, length(cellDir + randPoint - frac));\n        }\n    }\n    float powAdd = sin(uv.x * 2. + cc_time.x * glowRate) + sin(uv.y * 2. + cc_time.x * glowRate);\n    vec3 outColor = vec3(color * pow(minDistance, power + powAdd * .95) * colorMul);\n    outColor.rgb = mix(rockColor, outColor.rgb, minDistance);\n    return outColor;\n}\n  void main () {\n    vec4 color = v_color;\n    vec2 uv = vec2(v_uv0.x,  v_uv0.y);\n    vec3 c = magmaFunc(vec3(1., 1.0, 1.0), uv,   10.5, 0.15, 1.5, true, 0.0);\n    float l = smoothstep(0.0,0.2, c.r);\n    color.rgb += vec3(l,l,l);\n    color.a += l;\n    float dis = distance(vec2(v_uv0.x, v_uv0.y), vec2(0.5, 0.5));\n    color.a = smoothstep(radius - feather, radius, dis) * color.a;\n    color.rgb = mix(color.rgb, featherColor.rgb,smoothstep(0., feather, radius -dis));\n    gl_FragColor = color;\n  }"},"builtins":{"globals":{"blocks":[{"name":"CCGlobal","defines":[]}],"samplers":[]},"locals":{"blocks":[],"samplers":[]}},"defines":[{"name":"USE_ALPHA_TEST","type":"boolean","defines":[]},{"name":"USE_TEXTURE","type":"boolean","defines":[]}],"blocks":[{"name":"ALPHA_TEST","binding":0,"members":[{"name":"alphaThreshold","type":13,"count":1}],"defines":["USE_ALPHA_TEST"]},{"name":"Properties","binding":1,"members":[{"name":"featherColor","type":16,"count":1},{"name":"radius","type":13,"count":1},{"name":"feather","type":13,"count":1},{"name":"speed","type":13,"count":1},{"name":"tileW","type":13,"count":1},{"name":"tileH","type":13,"count":1}],"defines":[]}],"samplers":[{"name":"texture","type":29,"count":1,"binding":30,"defines":["USE_TEXTURE"]}]}],[{"passes":[{"program":"magma|vs|fs","blendState":{"targets":[{"blend":true}]},"rasterizerState":{"cullMode":0},"properties":{"speed":{"type":13,"value":[1]},"tileW":{"type":13,"value":[7]},"tileH":{"type":13,"value":[20]},"radius":{"type":13,"value":[0.2]},"feather":{"type":13,"value":[0.02]},"featherColor":{"type":16,"value":[1,1,1,1],"editor":{"type":"color"}}}}]}]]],0,0,[],[],[]],[[[1,"ghost"],[2,"ghost",117,[[3,0,-2,0],[4,100,100,10,50,-3,1]],[5,-1],[4,4292476931],[5,20000,20000],[-375,-667,0,0,0,0,1,1,1,1]]],0,[0,1,1,0,0,1,0,0,1,0,2,1,3],[0,0],[3,4],[0,1]]]]